{% extends 'base.html' %}

{% block content %}
    <div id="account" class="container-fluid card mt-3 mb-3" style="max-width: 540px;">
        <div class="row g-0">
            <div class="col-md-4">
                <img src="{{image_profile}}" class="rounded-circle account-img" alt="my-pix">
            </div>
            <div class="col-md-8">
                <div class="card-body">
                    <h2 class="card-title"> {{ current_user.username }} </h2>
                    <!-- <small class="text-muted"> {{ current_user.first_name}} {{ current_user.last_name }} </small> -->
                    <p class="card-text text-secondary"> {{ current_user.email }} </p>
                    <p class="card-text"><small class="text-muted">Last updated 3 mins ago</small></p>
                </div>
            </div>
        </div>

        <div class="container content-section">
            <form class="form-container" action="{{ url_for('users.account') }}" method="POST", enctype="multipart/form-data">
                {{form.hidden_tag()}}
                <fieldset class="form-group">
                    <legend class="border-bottom mb-3"> Account Info </legend>
        
                    <div class="form-group">
                        {{ form.first_name.label(class='form-control-label') }}
        
                        {% if form.first_name.errors %}
                            {{ form.first_name(class='form-control form-control-lg is-invalid') }}
                            <div class="invalid-feedback">
                                {% for error in form.first_name.errors %}
                                    <span> {{error}} </span>
                                {% endfor %}
                            </div>
                        {% else %}
                            {{ form.first_name(class='form-control shadow-none form-control-lg') }}
                        {% endif %}
        
                    </div>
                    <br>
        
                    <div class="form-group">
                        {{ form.last_name.label(class='form-control-label') }}
        
                        {% if form.last_name.errors %}
                            {{ form.last_name(class='form-control form-control-lg is-invalid') }}
                            <div class="invalid-feedback">
                                {% for error in form.last_name.errors %}
                                    <span> {{error}} </span>
                                {% endfor %}
                            </div>
                        {% else %}
                            {{ form.last_name(class='form-control shadow-none form-control-lg') }}
                        {% endif %}
        
                    </div>
                    <br>
        
                    <div class="form-group">
                        {{ form.email.label(class='form-control-label') }}
        
                        {% if form.email.errors %}
                            {{ form.email(class='form-control form-control-lg is-invalid') }}
                            <div class="invalid-feedback">
                                {% for error in form.email.errors %}
                                    <span> {{error}} </span>
                                {% endfor %}
                            </div>
                        {% else %}
                            {{ form.email(class='form-control shadow-none form-control-lg') }}
                        {% endif %}
                    </div>
                    <br>
        
                    <div class="form-group">
                        {{ form.username.label(class='form-control-label') }}
        
                        {% if form.username.errors %}
                            {{ form.username(class='form-control form-control-lg is-invalid') }}
                            <div class="invalid-feedback">
                                {% for error in form.username.errors %}
                                    <span> {{error}} </span>
                                {% endfor %}
                            </div>
                        {% else %}
                            {{ form.username(class='form-control shadow-none form-control-lg') }}
                        {% endif %}
                    </div>
                    <br>

                    <div class="form-group">
                        {{ form.image.label() }}<br>
                        {{ form.image(class='form-control-file') }}

                        {% if form.image.errors %}
                            {% for error in form.image.errors %}<br>
                                <span class="text-danger"> {{error}} </span><br>
                            {% endfor %}
                        {% endif %}
                    </div>
                </fieldset>
                <br>

                <div class="form-group">
                    {{ form.submit(class='btn btn-outline-info shadow-none')}}
                </div>
            </form>
        </div>

    </div>
{% endblock content %}